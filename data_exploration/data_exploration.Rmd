---
title: "Data exploration"
author: "François Delavy"
date: "3/11/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(knitr) # for kable()

raw_data <- rio::import("../data/raw/census-base-anonymized-2020.xlsx")

```

## Overview of the dataset

The dataset consists of `r dim(raw_data)[1]` observations (rows) and `r dim(raw_data)[2]` columns. Each column is a question. We will have to think about how to handles all the columns that are a coding language.  

The count of NAs by column:

```{r overview}

# glimpse(raw_data)

raw_data %>%
  select(everything()) %>%  
  summarise_all(list(~ sum(is.na(.)))) %>%
  t() %>%
  kable(format = "html")

```



## Each question/column in more details

Aim: see if some cleaning is needed, get an understanding of what the data is/mean.

The ID starts at 6. Check with Hamzah that we have all the data? 

```{r ID}

raw_data$ID


```

The time looks good, not sure if interesting information for us, though.

```{r time}

raw_data$`Start time` %>% head()

raw_data$`Completion time`  %>% head()

```

__TODO: delete the Name and email__

```{r email}

raw_data$Email %>% head()

```

```{r name}

raw_data$Name %>% head()

```

&nbsp;  
__TODO: We may want to group some of those in the visualizations?__  

```{r developer}

raw_data %>% 
  group_by(`Which of the following options best describes you today? Here, by "developer" we mean someone who writes code.`) %>%
  tally() %>%
  arrange(-n) %>%
  kable()

```

&nbsp;  

```{r hobby}

raw_data %>% 
  group_by(`Do you code as a hobby?`) %>%
  tally() %>%
  arrange(-n) %>%
  kable()
```

&nbsp;  
__TODO Some cleaning needed, e.g. National sService__

```{r employment}
raw_data %>% 
  group_by(`Which of the following best describes your current employment status?` ) %>%
  tally() %>%
  arrange(-n) %>%
  kable()
```

&nbsp;  
Looks clean, see [map](https://en.wikipedia.org/wiki/Regions_of_Ghana#/media/File:Ghana,_administrative_divisions_2018_-_de_-_colored.svg). Will need to decide what to do with respondents outside of Ghana (e.g. group them?).  

```{r region}

raw_data %>% 
  group_by(`In which region do you live?`) %>%
  tally() %>%
  arrange(-n) %>%
  kable()
```

&nbsp;  
__TODO: some cleaning needed, e.g. Accra, Ho, Tema, ...__  
Note: if we want a map, we could use together with the region to geolocalize 

```{r city}

raw_data %>% 
  group_by(`In which city or town do you live?`) %>%
  tally() %>%
  kable()
```


&nbsp;  
TODO: probably convertt to factor and set order.

```{r age}
raw_data %>% 
  group_by(`How old are you?`) %>%
  tally() %>%
  ggplot(aes(x=`How old are you?`, y=n)) + 
  geom_col() +
  theme_minimal() + 
  geom_text(aes(label = n), vjust = -0.5)

```

&nbsp;
TODO: need to take some decision on how to group the catetgories for plots

```{r new}
raw_data %>% 
  group_by(`How frequently do you learn a new language or framework?`) %>%
  tally() %>%
  arrange(-n) %>%
  kable()

```
&nbsp;
What, no R? :)  
Frie: "for the questions about tool proficiency, you could think about putting them into a second data frame “skills” or similar and then putting it in a long format with pivot_longer from tidyr (so that you have a column with the participant ID, a column “tool” and a column “level”)"  

```{r C}
raw_data %>% 
  group_by(C) %>%
  tally() %>%
  arrange(-n) %>%
  kable()

```

&nbsp;

```{r other}
raw_data %>% 
  group_by(`If there are any other technologies you've worked with this year or plan to work with next year that were not listed, please list them as follows, separated by commas. \r\n\r\neg. JavaScript - this year...`) %>%
  tally() %>%
  arrange(-n) %>%
  kable()
```


&nbsp;
```{r OS}
raw_data %>% 
  group_by(`In which operating system would you rather work?`) %>%
  tally() %>%
  arrange(-n) %>%
  kable()
```

&nbsp;
```{r }
raw_data %>% 
  group_by(`What level of influence do you, personally, have over new technology purchases at your organization?` ) %>%
  tally() %>%
  arrange(-n) %>%
  kable()
```

&nbsp;  
We will need to handle this once we decide what/how to plot:  
```{r }
raw_data %>% 
  group_by(`When buying a new tool or software, how do you discover and research available solutions? Select all that apply.`) %>%
  tally() %>%
  arrange(-n) %>%
  kable()
```

&nbsp;
```{r }
raw_data %>% 
  group_by(`Which of the following best describes the highest level of formal education that you have completed?`) %>%
  tally() %>%
  arrange(-n) %>%
  kable()
```
&nbsp;
&nbsp;
&nbsp;

...  






